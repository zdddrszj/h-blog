<!DOCTYPE html><html lang="zh-CN"><head><meta charset="utf-8"><meta name="X-UA-Compatible" content="IE=edge"><meta name="author" content="Shirly,zdddrszj@163.com"><title>DOM ä¸­çš„èŒƒå›´ Â· Shirly</title><meta name="description" content="DOM ä¸­çš„èŒƒå›´
1ã€ç”¨ DOM èŒƒå›´å®ç°ç®€å•é€‰æ‹©
2ã€ç”¨ DOM èŒƒå›´å®ç°å¤æ‚é€‰æ‹©
3ã€æ“ä½œ DOM èŒƒå›´ä¸­çš„å†…å®¹
4ã€æ’å…¥ DOM èŒƒå›´ä¸­çš„å†…å®¹
5ã€æŠ˜å  DOM èŒƒå›´
6ã€æ¯”è¾ƒ DOM èŒƒå›´
7"><meta name="keywords" content="Web,HTML,CSS,android,Linux"><meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" name="viewport"><meta content="yes" name="apple-mobile-web-app-capable"><meta content="black" name="apple-mobile-web-app-status-bar-style"><meta content="telephone=no" name="format-detection"><meta name="renderer" content="webkit"><link rel="short icon" href="/h-blog/images/favicon.png" type="image/x-icon"><link rel="stylesheet" href="https://imsun.github.io/gitment/style/default.css"><link rel="stylesheet" href="/h-blog/css/style.css"><link rel="stylesheet" href="/h-blog/css/blog_basic.css"><link rel="stylesheet" href="/h-blog/css/font-awesome.min.css"><link rel="alternate" type="application/atom+xml" title="ATOM 1.0" href="atom.xml"></head><body><div class="sidebar animated fadeInDown"><div class="logo-title"><div class="title"><img src="/h-blog/images/logo@2x.png" style="width:127px;"><h3 style="text-transform:none;"><a href="/">Shirly</a></h3><div class="description"><p>Without a friend the world is a wilderness.</p></div></div></div><ul class="social-links"><li><a href="/h-blog/atom.xml"><i class="fa fa-rss"></i></a></li><li><a href="http://weibo.com/zdddrszj/home"><i class="fa fa-weibo"></i></a></li><li><a href="http://github.com/zdddrszj"><i class="fa fa-github"></i></a></li></ul><div class="footer"><a target="_blank" href="/"><span>Theme by </span></a><a href="https://www.caicai.me"> CaiCai </a><span>&</span><a href="https://github.com/Ben02/hexo-theme-Anatole"> Ben</a><div class="by_farbox"><a href="https://hexo.io/zh-cn/" target="_blank">Proudly published with Hexo&#65281;</a></div></div></div><div class="main"><div class="page-top animated fadeInDown"><div class="nav"><li><a href="/h-blog">é¦–é¡µ</a></li><li><a href="/h-blog/archives">å½’æ¡£</a></li><li><a href="/h-blog/tagsCloud">æ ‡ç­¾äº‘</a></li><li><a href="/h-blog/about">å…³äº</a></li></div><div class="information"><div class="back_btn"><li><a onclick="window.history.go(-1)" class="fa fa-chevron-left"> </a></li></div><div class="avatar"><img src="/h-blog/images/favicon.png"></div></div></div><div class="autopagerize_page_element"><div class="content"><div class="post-page"><div class="post animated fadeInDown"><div class="post-title"><h2><a>DOM ä¸­çš„èŒƒå›´</a></h2><div class="post-intro"><span class="wordcount"><i class="fa fa-calendar-o"></i><span class="post-count">2017-05-24</span></span><span class="post-meta-divider">|</span><span class="wordcount"><i class="fa fa-folder-o"></i><span class="post-count"><a href="/h-blog/categories/å‰ç«¯/" title class="tag">å‰ç«¯</a></span></span><span class="post-meta-divider">|</span><span class="wordcount"><i class="fa fa-edit"></i><span class="post-count">å­—æ•°ç»Ÿè®¡4,110</span></span><span class="post-meta-divider">|</span><span class="wordcount"><i class="fa fa-clock-o"></i><span class="post-count">é˜…è¯»æ—¶é•¿17åˆ†é’Ÿ</span></span></div></div><div class="post-content"><!-- toc -->
<ul>
<li><a href="#dom-ä¸­çš„èŒƒå›´">DOM ä¸­çš„èŒƒå›´</a><ul>
<li><a href="#1-ç”¨-dom-èŒƒå›´å®ç°ç®€å•é€‰æ‹©">1ã€ç”¨ DOM èŒƒå›´å®ç°ç®€å•é€‰æ‹©</a></li>
<li><a href="#2-ç”¨-dom-èŒƒå›´å®ç°å¤æ‚é€‰æ‹©">2ã€ç”¨ DOM èŒƒå›´å®ç°å¤æ‚é€‰æ‹©</a></li>
<li><a href="#3-æ“ä½œ-dom-èŒƒå›´ä¸­çš„å†…å®¹">3ã€æ“ä½œ DOM èŒƒå›´ä¸­çš„å†…å®¹</a></li>
<li><a href="#4-æ’å…¥-dom-èŒƒå›´ä¸­çš„å†…å®¹">4ã€æ’å…¥ DOM èŒƒå›´ä¸­çš„å†…å®¹</a></li>
<li><a href="#5-æŠ˜å -dom-èŒƒå›´">5ã€æŠ˜å  DOM èŒƒå›´</a></li>
<li><a href="#6-æ¯”è¾ƒ-dom-èŒƒå›´">6ã€æ¯”è¾ƒ DOM èŒƒå›´</a></li>
<li><a href="#7-å¤åˆ¶-dom-èŒƒå›´">7ã€å¤åˆ¶ DOM èŒƒå›´</a></li>
<li><a href="#8-æ¸…ç†-dom-èŒƒå›´">8ã€æ¸…ç† DOM èŒƒå›´</a></li>
</ul>
</li>
<li><a href="#ie8åŠæ›´æ—©ç‰ˆæœ¬ä¸­çš„èŒƒå›´">IE8åŠæ›´æ—©ç‰ˆæœ¬ä¸­çš„èŒƒå›´</a><ul>
<li><a href="#1-ç”¨-ie-èŒƒå›´å®ç°ç®€å•çš„é€‰æ‹©">1ã€ç”¨ IE èŒƒå›´å®ç°ç®€å•çš„é€‰æ‹©</a></li>
<li><a href="#2-ä½¿ç”¨-ie-èŒƒå›´å®ç°å¤æ‚çš„é€‰æ‹©">2ã€ä½¿ç”¨ IE èŒƒå›´å®ç°å¤æ‚çš„é€‰æ‹©</a></li>
<li><a href="#3-æ“ä½œ-ie-èŒƒå›´ä¸­çš„å†…å®¹">3ã€æ“ä½œ IE èŒƒå›´ä¸­çš„å†…å®¹</a></li>
<li><a href="#4-æŠ˜å -ie-èŒƒå›´">4ã€æŠ˜å  IE èŒƒå›´</a></li>
<li><a href="#5-æ¯”è¾ƒ-ie-èŒƒå›´">5ã€æ¯”è¾ƒ IE èŒƒå›´</a></li>
<li><a href="#6-å¤åˆ¶-ie-èŒƒå›´">6ã€å¤åˆ¶ IE èŒƒå›´</a></li>
</ul>
</li>
</ul>
<!-- tocstop -->
<p>ä¸ºäº†è®©å¼€å‘äººå‘˜æ›´æ–¹ä¾¿æ§åˆ¶é¡µé¢ï¼Œ<code>DOM2</code> çº§éå†å’ŒèŒƒå›´æ¨¡å—å®šä¹‰äº† <strong>èŒƒå›´ ï¼ˆrangeï¼‰</strong> æ¥å£ã€‚é€šè¿‡èŒƒå›´å¯ä»¥é€‰æ‹©æ–‡æ¡£ä¸­çš„ä¸€ä¸ªåŒºåŸŸï¼Œè€Œä¸å¿…è€ƒè™‘èŠ‚ç‚¹çš„ç•Œé™ï¼ˆé€‰æ‹©åœ¨åå°å®Œæˆï¼Œå¯¹ç”¨æˆ·æ˜¯ä¸å¯è§çš„ï¼‰ã€‚ <code>Firefox</code>ã€<code>Opera</code>ã€<code>Safari</code> å’Œ <code>Chrome</code> éƒ½æ”¯æŒ <code>DOM</code> èŒƒå›´ã€‚IE ä»¥ä¸“æœ‰æ–¹å¼å®ç°äº†è‡ªå·±çš„èŒƒå›´ç‰¹æ€§ã€‚</p>
<h1><span id="dom-ä¸­çš„èŒƒå›´">DOM ä¸­çš„èŒƒå›´</span></h1><p><code>DOM2</code> çº§åœ¨ <code>Document</code> ç±»å‹ä¸­å®šä¹‰äº† <code>createRange()</code> æ–¹æ³•ã€‚åœ¨å…¼å®¹ <code>DOM</code> çš„æµè§ˆå™¨ä¸­ï¼Œä½¿ç”¨è¿™ä¸ªæ–¹æ³•å±äº <code>document</code> å¯¹è±¡ã€‚ä½¿ç”¨ <code>hasFeature()</code> æˆ–è€…ç›´æ¥æ£€æµ‹è¯¥æ–¹æ³•ï¼Œéƒ½å¯ä»¥ç¡®å®šæµè§ˆå™¨æ˜¯å¦æ”¯æŒèŒƒå›´ã€‚</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> supportsRange = <span class="built_in">document</span>.implementation.hasFeature(<span class="string">"Range"</span>,<span class="string">"2.0"</span>);</span><br><span class="line"><span class="keyword">var</span> alsoSupportsRange = (<span class="keyword">typeof</span> <span class="built_in">document</span>.createRange == <span class="string">"function"</span>);</span><br></pre></td></tr></table></figure>
<p>å¦‚æœæµè§ˆå™¨æ”¯æŒèŒƒå›´ï¼Œé‚£ä¹ˆå°±å¯ä»¥ä½¿ç”¨ <code>createRange()</code> æ¥åˆ›å»º <code>DOM</code> èŒƒå›´ï¼Œä¾‹å¦‚ï¼š</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> range = <span class="built_in">document</span>.createRange();</span><br></pre></td></tr></table></figure>
<p>ä¸èŠ‚ç‚¹ç±»ä¼¼ï¼Œæ–°åˆ›å»ºçš„èŒƒå›´ä¸åˆ›å»ºå®ƒçš„æ–‡æ¡£å…³è”åœ¨ä¸€èµ·ï¼Œä¸èƒ½ç”¨äºå…¶ä»–æ–‡æ¡£ã€‚<br>æ¯ä¸ªèŒƒå›´ç”±ä¸€ä¸ª<code>Range</code> ç±»å‹çš„å®ä¾‹è¡¨ç¤ºï¼Œè¿™ä¸ªå®ä¾‹æ‹¥æœ‰å¾ˆå¤šå±æ€§å’Œæ–¹æ³•ã€‚ä¸‹åˆ—å±æ€§æä¾›äº†å½“å‰èŒƒå›´åœ¨æ–‡æ¡£ä¸­çš„ä½ç½®ä¿¡æ¯ï¼š</p>
<p>1ã€<code>startContainer</code>ï¼šåŒ…å«èŒƒå›´èµ·ç‚¹çš„èŠ‚ç‚¹ï¼ˆå³é€‰åŒºä¸­ç¬¬ä¸€ä¸ªèŠ‚ç‚¹çš„çˆ¶èŠ‚ç‚¹ï¼‰ã€‚<br>2ã€<code>startOffset</code>ï¼šèŒƒå›´åœ¨ startContainer ä¸­èµ·ç‚¹çš„åç§»é‡ã€‚<br>3ã€<code>endContainer</code>ï¼šåŒ…å«èŒƒå›´ç»ˆç‚¹çš„èŠ‚ç‚¹ï¼ˆå³é€‰åŒºä¸­æœ€åä¸€ä¸ªèŠ‚ç‚¹çš„çˆ¶èŠ‚ç‚¹ï¼‰ã€‚<br>4ã€<code>endOffset</code>ï¼šèŒƒå›´åœ¨ endContainer ä¸­ç»ˆç‚¹çš„åç§»é‡ã€‚<br>5ã€<code>commonAncestorContainer</code>ï¼šstartContainer å’Œ endContainer å…±åŒçš„ç¥–å…ˆèŠ‚ç‚¹ã€‚</p>
<p>ä¸‹é¢ç®€å•ä»‹ç»ä¸€ä¸‹èŒƒå›´çš„ä½¿ç”¨æ–¹æ³•ï¼š</p>
<h3><span id="1-ç”¨-dom-èŒƒå›´å®ç°ç®€å•é€‰æ‹©">1ã€ç”¨ DOM èŒƒå›´å®ç°ç®€å•é€‰æ‹©</span></h3><p>è¦ä½¿ç”¨èŒƒå›´æ¥é€‰æ‹©æ–‡æ¡£ä¸­çš„ä¸€éƒ¨åˆ†ï¼Œæœ€ç®€å•çš„æ–¹å¼æ˜¯ä½¿ç”¨ <code>selectNode()</code> æˆ– <code>selectNodeContents()</code>ï¼Œä¾‹å¦‚ï¼š</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">"utf-8"</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">p</span> <span class="attr">id</span>=<span class="string">"p1"</span>&gt;</span><span class="tag">&lt;<span class="name">b</span>&gt;</span>Hello<span class="tag">&lt;/<span class="name">b</span>&gt;</span> world!<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="undefined"></span></span><br><span class="line"><span class="javascript">            <span class="keyword">var</span> range1 = <span class="built_in">document</span>.createRange(),</span></span><br><span class="line"><span class="javascript">                range2 = <span class="built_in">document</span>.createRange(),</span></span><br><span class="line"><span class="javascript">                p1 = <span class="built_in">document</span>.getElementById(<span class="string">"p1"</span>);</span></span><br><span class="line"><span class="undefined">            range1.selectNode(p1);</span></span><br><span class="line"><span class="undefined">            range2.selectNodeContents(p1);      </span></span><br><span class="line"><span class="undefined">        </span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>ä¸¤ä¸ªèŒƒå›´åŒ…å«æ–‡æ¡£ä¸­ä¸åŒéƒ¨åˆ†ï¼Œå¦‚å›¾ï¼š<br><img src="https://cloud.githubusercontent.com/assets/9649921/11467545/c48f7f2a-9783-11e5-8f56-0b63c1ade9b1.png" alt="1"><br>åœ¨è°ƒç”¨ <code>selectNode()</code> æ—¶ï¼Œ<code>startContainer</code>ã€<code>endContainer</code> éƒ½ç­‰äºä¼ å…¥èŠ‚ç‚¹çš„çˆ¶èŠ‚ç‚¹ï¼Œä¹Ÿå°±æ˜¯ <code>document.body</code>ã€‚è€Œ <code>startOffset</code> å±æ€§ç­‰äºç»™å®šèŠ‚ç‚¹åœ¨å…¶çˆ¶èŠ‚ç‚¹çš„ <code>childNodes</code> é›†åˆä¸­çš„ç´¢å¼•ï¼ˆåœ¨è¿™ä¸ªä¾‹å­ä¸­æ˜¯ <code>1</code> ï¼Œå› ä¸ºå…¼å®¹ <code>DOM</code> çš„æµè§ˆå™¨å°†ç©ºæ ¼ç®—ä½œä¸€ä¸ªæ–‡æœ¬èŠ‚ç‚¹ï¼‰ï¼Œ<code>endOffset</code> ç­‰äº <code>startOffset</code> åŠ  <code>1</code> ï¼ˆå› ä¸ºåªé€‰æ‹©äº†ä¸€ä¸ªèŠ‚ç‚¹ï¼‰ã€‚<br>åœ¨è°ƒç”¨ <code>selectNodeContents()</code> æ—¶ï¼Œ<code>startContainer</code>ã€<code>endContainer</code> ç­‰äºä¼ å…¥çš„èŠ‚ç‚¹ï¼Œå³è¿™ä¸ªä¾‹å­ä¸­çš„ <code>&lt;p&gt;</code> å…ƒç´ ã€‚è€Œ <code>startOffset</code> å±æ€§å§‹ç»ˆç­‰äº <code>0</code> ï¼Œå› ä¸ºèŒƒå›´ä»ç»™å®šèŠ‚ç‚¹çš„ç¬¬ä¸€ä¸ªå­èŠ‚ç‚¹å¼€å§‹ã€‚æœ€åï¼Œ<code>endOffset</code> ç­‰äºå­èŠ‚ç‚¹çš„æ•°é‡ï¼ˆnode.childNodes.lengthï¼‰ï¼Œåœ¨è¿™ä¸ªä¾‹å­ä¸­æ˜¯ <code>2</code> ã€‚ä¾‹å¦‚ï¼š</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">console</span>.log(range1.startContainer); <span class="comment">//&lt;body&gt;...&lt;/body&gt;</span></span><br><span class="line"><span class="built_in">console</span>.log(range2.startContainer); <span class="comment">//&lt;p id="p1"&gt;...&lt;/p&gt;</span></span><br><span class="line"><span class="built_in">console</span>.log(range1.endContainer); <span class="comment">//&lt;body&gt;...&lt;/body&gt;</span></span><br><span class="line"><span class="built_in">console</span>.log(range2.endContainer); <span class="comment">//&lt;p id="p1"&gt;...&lt;/p&gt;</span></span><br><span class="line"><span class="built_in">console</span>.log(range1.startOffset); <span class="comment">//1</span></span><br><span class="line"><span class="built_in">console</span>.log(range2.startOffset); <span class="comment">//0</span></span><br><span class="line"><span class="built_in">console</span>.log(range1.endOffset); <span class="comment">//2</span></span><br><span class="line"><span class="built_in">console</span>.log(range2.endOffset); <span class="comment">//2</span></span><br></pre></td></tr></table></figure>
<p>æ­¤å¤–ï¼Œä¸ºäº†æ›´ç²¾ç»†åœ°æ§åˆ¶å“ªäº›èŠ‚ç‚¹åŒ…å«åœ¨èŒƒå›´å†…ï¼Œè¿˜å¯ä»¥ä½¿ç”¨ä¸‹åˆ—æ–¹æ³•ï¼š</p>
<p>1ã€<code>setStartBefore(refNode)</code>ï¼šå°†èŒƒå›´çš„èµ·ç‚¹è®¾ç½®åœ¨ refNode ä¹‹å‰ã€‚<br>2ã€<code>setStartAfter(refNode)</code>ï¼šå°†èŒƒå›´çš„èµ·ç‚¹è®¾ç½®åœ¨refNode ä¹‹åã€‚<br>3ã€<code>setEndBefore(refNode)</code>ï¼šå°†èŒƒå›´çš„ç»ˆç‚¹è®¾ç½®åœ¨ refNode ä¹‹å‰ã€‚<br>4ã€<code>setEndAfter(refNode)</code>ï¼šå°†èŒƒå›´çš„ç»ˆç‚¹è®¾ç½®åœ¨ refNode ä¹‹åã€‚</p>
<h3><span id="2-ç”¨-dom-èŒƒå›´å®ç°å¤æ‚é€‰æ‹©">2ã€ç”¨ DOM èŒƒå›´å®ç°å¤æ‚é€‰æ‹©</span></h3><p>è¦åˆ›å»ºå¤æ‚çš„èŒƒå›´å°±å¾—ä½¿ç”¨ <code>setStart()</code> å’Œ <code>setEnd()</code> æ–¹æ³•ã€‚è¿™ä¸¤ä¸ªæ–¹æ³•éƒ½æ¥å—ä¸¤ä¸ªå‚æ•°ï¼šä¸€ä¸ªå‚ç…§èŠ‚ç‚¹å’Œä¸€ä¸ªåç§»é‡å€¼ã€‚å¯¹ <code>setStart()</code> æ¥è¯´ï¼Œå‚ç…§èŠ‚ç‚¹ä¼šå˜æˆ <code>startContainer</code>ï¼Œè€Œåç§»é‡å€¼ä¼šå˜   <code>startOffset</code> ã€‚å¯¹äº <code>setEnd()</code> æ¥è¯´ï¼Œå‚ç…§èŠ‚ç‚¹ä¼šå˜æˆ <code>endContainer</code> ï¼Œè€Œåç§»é‡å€¼ä¼šå˜æˆ <code>endOffset</code>ã€‚<br>å¯ä»¥ä½¿ç”¨è¿™ä¸¤ä¸ªæ–¹æ³•æ¥æ¨¡æ‹Ÿ <code>selectNode()</code> å’Œ <code>selectNodeContents()</code> ã€‚ä¾‹å¦‚ï¼š</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> range1 = <span class="built_in">document</span>.createRange(),</span><br><span class="line">    range2 = <span class="built_in">document</span>.createRange(),</span><br><span class="line">    p1 = <span class="built_in">document</span>.getElementById(<span class="string">"p1"</span>),</span><br><span class="line">    p1Index = <span class="number">-1</span>,i,len;</span><br><span class="line"><span class="keyword">for</span>(i = <span class="number">0</span>, len = p1.parentNode.childNodes.length; i &lt; len; i++)&#123;</span><br><span class="line">    <span class="keyword">if</span>(p1.parentNode.childNodes[i] == p1)&#123;</span><br><span class="line">        p1Index = i;</span><br><span class="line">        <span class="keyword">break</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">range1.setStart(p1.parentNode,p1Index);</span><br><span class="line">range1.setEnd(p1.parentNode,p1Index+<span class="number">1</span>);</span><br><span class="line">range2.setStart(p1,<span class="number">0</span>);</span><br><span class="line">range2.setEnd(p1,p1.childNodes.length);</span><br></pre></td></tr></table></figure>
<p>å‡è®¾ä½ åªæƒ³é€‰æ‹©å‰é¢ <code>HTML</code> ç¤ºä¾‹ä»£ç ä¸­ä» <code>hello</code> çš„ <code>llo</code> åˆ° <code>world!</code> çš„ <code>o</code> ï¼Œå¯ä»¥è¿™æ ·åšï¼š</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> p1 = <span class="built_in">document</span>.getElementById(<span class="string">"p1"</span>),</span><br><span class="line">    helloNode = p1.firstChild.firstChild,</span><br><span class="line">    worldNode = p1.lastChild;</span><br><span class="line"><span class="keyword">var</span> range = <span class="built_in">document</span>.createRange();</span><br><span class="line">range.setStart(helloNode,<span class="number">2</span>);</span><br><span class="line">range.setEnd(worldNode,<span class="number">3</span>);</span><br></pre></td></tr></table></figure>
<p>ç”±äº <code>helloNode</code> å’Œ <code>worldNode</code> éƒ½æ˜¯æ–‡æœ¬èŠ‚ç‚¹ï¼Œå› æ­¤å®ƒä»¬åˆ†åˆ«å˜æˆäº†æ–°å»ºèŒƒå›´çš„ <code>startContainer</code> å’Œ <code>endContainer</code> ã€‚æ­¤æ—¶ <code>startOffset</code> å’Œ <code>endOffset</code> åˆ†åˆ«ç”¨ä»¥ç¡®å®šä¸¤ä¸ªèŠ‚ç‚¹æ‰€åŒ…å«çš„æ–‡æœ¬ä¸­çš„ä½ç½®ï¼Œè€Œä¸æ˜¯ç”¨ä»¥ç¡®å®šå­èŠ‚ç‚¹çš„ä½ç½®ã€‚å¦‚å›¾ï¼š<br><img src="https://cloud.githubusercontent.com/assets/9649921/11468680/5ef0bfd6-978c-11e5-9c91-31f038224c73.png" alt="2"></p>
<h3><span id="3-æ“ä½œ-dom-èŒƒå›´ä¸­çš„å†…å®¹">3ã€æ“ä½œ DOM èŒƒå›´ä¸­çš„å†…å®¹</span></h3><p>å¯¹å‰é¢çš„ä¾‹å­è€Œè¨€ï¼ŒèŒƒå›´ç»è¿‡è®¡ç®—çŸ¥é“é€‰å–ä¸­ç¼ºå°‘ä¸€ä¸ªå¼€å§‹çš„ <code>&lt;b&gt;</code> æ ‡ç­¾ï¼Œå› æ­¤å°±ä¼šåœ¨åå°åŠ¨æ€æ·»åŠ ä¸€ä¸ªè¯¥æ ‡ç­¾ï¼ŒåŒæ—¶è¿˜ä¼šåœ¨å‰é¢åŠ å…¥ä¸€ä¸ªè¡¨ç¤ºç»“æŸçš„ <code>&lt;b&gt;</code> æ ‡ç­¾ã€‚äºæ˜¯ä¿®æ”¹åçš„ <code>DOM</code> å°±å˜æˆå¦‚ä¸‹æ‰€ç¤ºï¼š<br><code>&lt;p&gt;&lt;b&gt;He&lt;/b&gt;&lt;b&gt;llo&lt;/b&gt; world!&lt;/p&gt;</code>ã€‚</p>
<p>åƒè¿™æ ·åˆ›å»ºäº†èŒƒå›´ä¹‹åï¼Œå°±å¯ä»¥ä½¿ç”¨å„ç§æ–¹æ³•å¯¹èŒƒå›´çš„å†…å®¹è¿›è¡Œæ“ä½œäº†ã€‚<br>ç¬¬ä¸€ä¸ªæ–¹æ³•ï¼š<code>deleteContents()</code>ï¼Œä»æ–‡æ¡£ä¸­åˆ é™¤èŒƒå›´æ‰€åŒ…å«çš„å†…å®¹ã€‚ä¾‹å¦‚ï¼š</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">range.deleteContents();</span><br></pre></td></tr></table></figure>
<p>æ‰§è¡Œè¿™å¥ä»£ç ä¹‹åï¼Œé¡µé¢ä¼šæ˜¾ç¤ºå¦‚ä¸‹ <code>HTML</code> ä»£ç ï¼š</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">p</span> <span class="attr">id</span>=<span class="string">"p1"</span>&gt;</span><span class="tag">&lt;<span class="name">b</span>&gt;</span>He<span class="tag">&lt;/<span class="name">b</span>&gt;</span>rld!<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>ç¬¬äºŒä¸ªæ–¹æ³•ï¼š<code>extractContents()</code> ï¼Œä¹Ÿä¼šä»æ–‡æ¡£ä¸­ç§»é™¤èŒƒå›´é€‰åŒºï¼Œä½†ä¼šè¿”å›æ–‡æ¡£ç‰‡æ®µã€‚ä¾‹å¦‚ï¼š</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> fragment = range.extractContents();</span><br><span class="line">p1.parentNode.appendChild(fragment);</span><br></pre></td></tr></table></figure>
<p>æ‰§è¡Œè¿™å¥ä»£ç ä¹‹åï¼Œé¡µé¢ä¼šæ˜¾ç¤ºå¦‚ä¸‹ <code>HTML</code> ä»£ç ï¼š</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">p</span> <span class="attr">id</span>=<span class="string">"p1"</span>&gt;</span><span class="tag">&lt;<span class="name">b</span>&gt;</span>He<span class="tag">&lt;/<span class="name">b</span>&gt;</span>rld!<span class="tag">&lt;/<span class="name">p</span>&gt;</span><span class="tag">&lt;<span class="name">b</span>&gt;</span>llo<span class="tag">&lt;/<span class="name">b</span>&gt;</span> wo</span><br></pre></td></tr></table></figure>
<p>ç¬¬ä¸‰ä¸ªæ–¹æ³•ï¼š<code>cloneContents()</code> ï¼Œä¼šåˆ›å»ºèŒƒå›´å¯¹è±¡çš„ä¸€ä¸ªå‰¯æœ¬ï¼Œç„¶åæ’å…¥åˆ°å…¶ä»–åœ°æ–¹ã€‚ä¾‹å¦‚ï¼š</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> fragment = range.cloneContents();</span><br><span class="line">p1.parentNode.appendChild(fragment);</span><br></pre></td></tr></table></figure>
<p>æ‰§è¡Œè¿™å¥ä»£ç ä¹‹åï¼Œé¡µé¢ä¼šæ˜¾ç¤ºå¦‚ä¸‹ <code>HTML</code> ä»£ç ï¼š</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">p</span> <span class="attr">id</span>=<span class="string">"p1"</span>&gt;</span><span class="tag">&lt;<span class="name">b</span>&gt;</span>Hello<span class="tag">&lt;/<span class="name">b</span>&gt;</span> world!<span class="tag">&lt;/<span class="name">p</span>&gt;</span><span class="tag">&lt;<span class="name">b</span>&gt;</span>llo<span class="tag">&lt;/<span class="name">b</span>&gt;</span> wo</span><br></pre></td></tr></table></figure>
<h3><span id="4-æ’å…¥-dom-èŒƒå›´ä¸­çš„å†…å®¹">4ã€æ’å…¥ DOM èŒƒå›´ä¸­çš„å†…å®¹</span></h3><p>åˆ©ç”¨èŒƒå›´ï¼Œå¯ä»¥åˆ é™¤æˆ–å¤åˆ¶å†…å®¹ï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨ <code>insertNode()</code> æ–¹æ³•åƒèŒƒå›´é€‰åŒºçš„å¼€å§‹å¤„æ’å…¥ä¸€ä¸ªèŠ‚ç‚¹ã€‚å‡è®¾æˆ‘ä»¬åœ¨å‰é¢ä¾‹å­ä¸­çš„ <code>HTML</code> å‰é¢æ’å…¥ä»¥ä¸‹ <code>HTML</code> ä»£ç ï¼š<code>&lt;span style=&quot;color:red;&quot;&gt;Inserted text&lt;/span&gt;</code>  ï¼Œé‚£ä¹ˆå¯ä»¥ä½¿ç”¨ä»¥ä¸‹ä»£ç ï¼š</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> span = <span class="built_in">document</span>.createElement(<span class="string">"span"</span>);</span><br><span class="line">span.style.color = <span class="string">"red"</span>;</span><br><span class="line">span.appendChild(<span class="built_in">document</span>.createTextNode(<span class="string">"Inserted text"</span>));</span><br><span class="line">range.insertNode(span);</span><br></pre></td></tr></table></figure>
<p>æ‰§è¡Œè¿™å¥ä»£ç ä¹‹åï¼Œé¡µé¢ä¼šæ˜¾ç¤ºå¦‚ä¸‹ <code>HTML</code> ä»£ç ï¼š</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">p</span> <span class="attr">id</span>=<span class="string">"p1"</span>&gt;</span><span class="tag">&lt;<span class="name">b</span>&gt;</span>He<span class="tag">&lt;<span class="name">span</span> <span class="attr">style</span>=<span class="string">"color: red;"</span>&gt;</span>Inserted text<span class="tag">&lt;/<span class="name">span</span>&gt;</span>llo<span class="tag">&lt;/<span class="name">b</span>&gt;</span> world!<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>æ³¨æ„ï¼š<code>&lt;span&gt;</code> æ­£å¥½è¢«æ’å…¥åˆ°äº† <code>hello</code> ä¸­çš„ <code>llo</code> å‰é¢ï¼Œè€Œè¯¥ä½ç½®å°±æ˜¯èŒƒå›´é€‰åŒºçš„å¼€å§‹ä½ç½®ã€‚è¿˜è¦æ³¨æ„çš„æ˜¯ï¼Œè¿™é‡Œå¹¶æ²¡æœ‰æ·»åŠ æˆ–åˆ é™¤ <code>&lt;b&gt;</code> å…ƒç´ ï¼Œä½¿ç”¨è¿™ç§æŠ€æœ¯å¯ä»¥æ’å…¥ä¸€äº›å¸®åŠ©æç¤ºä¿¡æ¯ï¼Œä¾‹å¦‚åœ¨æ‰“å¼€æ–°çª—å£çš„é“¾æ¥æ—æ’å…¥ä¸€å¹…å›¾åƒã€‚</p>
<p>é™¤äº†åƒèŒƒå›´å†…éƒ¨æ’å…¥å†…å®¹ä¹‹å¤–ï¼Œè¿˜å¯ä»¥å›´ç»•èŒƒå›´æ’å…¥å†…å®¹ï¼Œæ­¤æ—¶å°±è¦ä½¿ç”¨ <code>surroundContents()</code> æ–¹æ³•ã€‚è¯¥æ–¹æ³•æ¥å—ä¸€ä¸ªå‚æ•°ï¼Œå³ç¯ç»•èŒƒå›´å†…å®¹çš„èŠ‚ç‚¹ã€‚ä¾‹å¦‚ï¼š</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">range.selectNode(helloNode);</span><br><span class="line"><span class="keyword">var</span> span = <span class="built_in">document</span>.createElement(<span class="string">"span"</span>);</span><br><span class="line">span.style.backgroundColor = <span class="string">"yellow"</span>;  </span><br><span class="line">range.surroundContents(span);</span><br></pre></td></tr></table></figure>
<p>æ‰§è¡Œè¿™å¥ä»£ç ä¹‹åï¼Œä¼šç»™èŒƒå›´é€‰åŒºåŠ ä¸Šä¸€ä¸ªé»„è‰²èƒŒæ™¯ã€‚å¾—åˆ°çš„ <code>HTML</code> ä»£ç å¦‚ä¸‹æ‰€ç¤ºï¼š</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">p</span> <span class="attr">id</span>=<span class="string">"p1"</span>&gt;</span><span class="tag">&lt;<span class="name">b</span>&gt;</span><span class="tag">&lt;<span class="name">span</span> <span class="attr">style</span>=<span class="string">"background-color: yellow;"</span>&gt;</span>Hello<span class="tag">&lt;/<span class="name">span</span>&gt;</span><span class="tag">&lt;/<span class="name">b</span>&gt;</span> world!<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>æ³¨æ„ï¼šä¸ºäº†æ’å…¥ <code>&lt;span&gt;</code> ï¼ŒèŒƒå›´å¿…é¡»åŒ…å«æ•´ä¸ª <code>DOM</code> é€‰åŒºï¼ˆä¸èƒ½ä»…ä»…åŒ…å«é€‰ä¸­çš„ <code>DOM</code> èŠ‚ç‚¹ï¼‰ã€‚</p>
<h3><span id="5-æŠ˜å -dom-èŒƒå›´">5ã€æŠ˜å  DOM èŒƒå›´</span></h3><p>æ‰€è°“ <strong>æŠ˜å èŒƒå›´</strong> ï¼Œå°±æ˜¯æŒ‡èŒƒå›´ä¸­æœªé€‰æ‹©æ–‡æ¡£çš„ä»»ä½•éƒ¨åˆ†ã€‚ä½¿ç”¨ <code>collapse()</code> æ–¹æ³•æ¥æŠ˜å èŒƒå›´ï¼Œè¯¥æ–¹æ³•æ¥å—ä¸€ä¸ªå‚æ•°ï¼Œä¸€ä¸ªå¸ƒå°”å€¼ï¼Œè¡¨ç¤ºè¦æŠ˜å åˆ°èŒƒå›´çš„å“ªä¸€ç«¯ã€‚å‚æ•° <code>true</code> è¡¨ç¤ºè¦æŠ˜å åˆ°èŒƒå›´çš„èµ·ç‚¹ï¼Œå‚æ•° <code>false</code> è¡¨ç¤ºè¦æŠ˜å åˆ°èŒƒå›´çš„ç»ˆç‚¹ã€‚è¦ç¡®å®šèŒƒå›´å·²ç»æŠ˜å å®Œæ¯•ï¼Œå¯ä»¥æ£€æŸ¥ <code>collapsed</code> å±æ€§ï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">range.collapse(<span class="literal">true</span>); <span class="comment">//æŠ˜å åˆ°èµ·ç‚¹</span></span><br><span class="line">alert(range.collapsed); <span class="comment">//è¾“å‡º true</span></span><br></pre></td></tr></table></figure>
<p>æ£€æµ‹æŸä¸ªèŒƒå›´æ˜¯å¦å¤„äºæŠ˜å çŠ¶æ€ï¼Œå¯ä»¥å¸®åŠ©æˆ‘ä»¬ç¡®å®šèŒƒå›´ä¸­çš„ä¸¤ä¸ªèŠ‚ç‚¹æ˜¯å¦ç´§å¯†ç›¸é‚»ã€‚ä¾‹å¦‚ï¼Œå¯¹äºä¸‹é¢çš„ <code>HTML</code> ä»£ç ï¼š</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">p</span> <span class="attr">id</span>=<span class="string">"p1"</span>&gt;</span>Paragraph 1<span class="tag">&lt;/<span class="name">p</span>&gt;</span><span class="tag">&lt;<span class="name">p</span> <span class="attr">id</span>=<span class="string">"p2"</span>&gt;</span>Paragraph 2<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>æˆ‘ä»¬å‡è®¾ä¸çŸ¥å…¶å®é™…æ„æˆï¼ˆæ¯”å¦‚åŠ¨æ€ç”Ÿæˆçš„ï¼‰ï¼Œé‚£ä¹ˆå¯ä»¥åƒä¸‹é¢è¿™æ ·åˆ›å»ºä¸€ä¸ªèŒƒå›´ï¼š</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> p1 = <span class="built_in">document</span>.getElementById(<span class="string">'p1'</span>),</span><br><span class="line">    p2 = <span class="built_in">document</span>.getElementById(<span class="string">'p2'</span>),</span><br><span class="line">    range = <span class="built_in">document</span>.createRange();</span><br><span class="line">range.setStartAfter(p1);</span><br><span class="line">range.setEndBefore(p2);</span><br><span class="line">alert(range.collapsed); <span class="comment">//true</span></span><br></pre></td></tr></table></figure>
<p>åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œåˆ›å»ºçš„èŒƒå›´æ˜¯æŠ˜å çš„ï¼Œæ‰€ä»¥ <code>p1</code> å’Œ <code>p1</code> æ˜¯ç›¸é‚»çš„ã€‚</p>
<h3><span id="6-æ¯”è¾ƒ-dom-èŒƒå›´">6ã€æ¯”è¾ƒ DOM èŒƒå›´</span></h3><p>åœ¨æœ‰å¤šä¸ªèŒƒå›´çš„æƒ…å†µä¸‹ï¼Œå¯ä»¥ä½¿ç”¨ <code>compareBoundaryPoints()</code> æ–¹æ³•æ¥ç¡®å®šè¿™äº›èŒƒå›´æ˜¯å¦æœ‰å…¬å…±çš„è¾¹ç•Œã€‚è¿™ä¸ªæ–¹æ³•æ¥å—ä¸¤ä¸ªå‚æ•°ï¼šè¡¨ç¤ºæ¯”è¾ƒæ–¹å¼çš„å¸¸é‡å€¼å’Œè¦æ¯”è¾ƒçš„èŒƒå›´ã€‚è¡¨ç¤ºæ¯”è¾ƒæ–¹å¼çš„å¸¸é‡å¦‚ä¸‹ï¼š</p>
<p>1ã€<code>Range.START_TO_START</code>ï¼šæ¯”è¾ƒç¬¬ä¸€ä¸ªèŒƒå›´å’Œç¬¬äºŒä¸ªèŒƒå›´çš„èµ·ç‚¹ï¼›<br>2ã€<code>Range.START_TO_END</code>ï¼šæ¯”è¾ƒç¬¬ä¸€ä¸ªèŒƒå›´çš„èµ·ç‚¹å’Œç¬¬äºŒä¸ªèŒƒå›´çš„ç»ˆç‚¹ï¼›<br>3ã€<code>Range.END_TO_END</code>ï¼šæ¯”è¾ƒç¬¬ä¸€ä¸ªèŒƒå›´å’Œç¬¬äºŒä¸ªèŒƒå›´çš„ç»ˆç‚¹ï¼›<br>4ã€<code>Range.END_TO_START</code>ï¼šæ¯”è¾ƒç¬¬ä¸€ä¸ªèŒƒå›´çš„ç»ˆç‚¹å’Œç¬¬äºŒä¸ªèŒƒå›´çš„èµ·ç‚¹ï¼›</p>
<p><code>compareBoundaryPoints()</code>æ–¹æ³•è¿”å›å€¼å¦‚ä¸‹ï¼šå¦‚æœç¬¬ä¸€ä¸ªèŒƒå›´ä¸­çš„ç‚¹ä½äºç¬¬äºŒä¸ªèŒƒå›´ä¸­çš„ç‚¹ä¹‹å‰ï¼Œè¿”å› <code>-1</code> ï¼›å¦‚æœä¸¤ä¸ªç‚¹ç›¸ç­‰ï¼Œè¿”å› <code>0</code> ï¼›å¦‚æœç¬¬ä¸€ä¸ªèŒƒå›´ä¸­çš„ç‚¹ä½äºç¬¬äºŒä¸ªèŒƒå›´ä¸­çš„ç‚¹ä¹‹åï¼Œè¿”å› <code>1</code> ã€‚ä¾‹å¦‚ï¼š</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> range1 = <span class="built_in">document</span>.createRange(),</span><br><span class="line">    range2 = <span class="built_in">document</span>.createRange(),</span><br><span class="line">    p1 = <span class="built_in">document</span>.getElementById(<span class="string">"p1"</span>);</span><br><span class="line">range1.selectNodeContents(p1);</span><br><span class="line">range2.selectNodeContents(p1);</span><br><span class="line">range2.setEndBefore(p1.lastChild);</span><br><span class="line">alert(range1.compareBoundaryPoints(Range.START_TO_START,range2)); <span class="comment">//0</span></span><br><span class="line">alert(range1.compareBoundaryPoints(Range.END_TO_END,range2)); <span class="comment">//1</span></span><br></pre></td></tr></table></figure>
<p>è¿™ä¸ªä¾‹å­ä¸­ï¼Œä¸¤ä¸ªèŒƒå›´çš„èµ·ç‚¹ç›¸åŒï¼Œç¬¬ä¸€ä¸ªèŒƒå›´çš„ç»ˆç‚¹ä½äºç¬¬äºŒä¸ªèŒƒå›´çš„ç»ˆç‚¹åé¢ï¼Œå¦‚å›¾ï¼š<br><img src="https://cloud.githubusercontent.com/assets/9649921/11490882/d46e1548-9817-11e5-975c-deb496beefce.png" alt="1"></p>
<h3><span id="7-å¤åˆ¶-dom-èŒƒå›´">7ã€å¤åˆ¶ DOM èŒƒå›´</span></h3><p>å¯ä»¥ä½¿ç”¨ <code>cloneRange()</code> æ–¹æ³•å¤åˆ¶èŒƒå›´ï¼Œè¿™ä¸ªæ–¹æ³•ä¼šåˆ›å»ºè°ƒç”¨å®ƒçš„èŒƒå›´çš„ä¸€ä¸ªå‰¯æœ¬ã€‚</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> newRange = range.cloneRange();</span><br></pre></td></tr></table></figure>
<p>æ–°åˆ›å»ºçš„èŒƒå›´ä¸åŸæ¥çš„èŒƒå›´åŒ…å«ç›¸åŒçš„å±æ€§ï¼Œè€Œä¿®æ”¹å®ƒçš„ç«¯ç‚¹ä¸ä¼šå½±å“åŸæ¥çš„èŒƒå›´ã€‚</p>
<h3><span id="8-æ¸…ç†-dom-èŒƒå›´">8ã€æ¸…ç† DOM èŒƒå›´</span></h3><p>åœ¨ä½¿ç”¨å®ŒèŒƒå›´åï¼Œæœ€å¥½æ˜¯è°ƒç”¨ <code>detach()</code> æ–¹æ³•ï¼Œä»¥ä¾¿ä»åˆ›å»ºèŒƒå›´çš„æ–‡æ¡£ä¸­åˆ†ç¦»å‡ºè¯¥èŒƒå›´ã€‚è°ƒç”¨ <code>detach()</code> ä¹‹åï¼Œå°±å¯ä»¥æ”¾å¿ƒåœ°è§£é™¤å¯¹èŒƒå›´çš„å¼•ç”¨ï¼Œä»è€Œè®©åƒåœ¾å›æ”¶æœºåˆ¶å›æ”¶å…¶å†…å­˜äº†ã€‚ä¾‹å¦‚ï¼š</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">range.detach(); <span class="comment">//ä»æ–‡æ¡£ä¸­åˆ†ç¦»</span></span><br><span class="line">range = <span class="literal">null</span>; <span class="comment">//è§£é™¤å¼•ç”¨</span></span><br></pre></td></tr></table></figure>
<p>åœ¨ä½¿ç”¨èŒƒå›´çš„æœ€ååœ¨æ‰§è¡Œè¿™ä¸¤ä¸ªæ­¥éª¤æ˜¯æˆ‘ä»¬æ¨èçš„æ–¹å¼ï¼Œä¸€æ—¦åˆ†ç¦»èŒƒå›´ï¼Œå°±ä¸èƒ½åœ¨æ¢å¤ä½¿ç”¨äº†ã€‚</p>
<h1><span id="ie8åŠæ›´æ—©ç‰ˆæœ¬ä¸­çš„èŒƒå›´">IE8åŠæ›´æ—©ç‰ˆæœ¬ä¸­çš„èŒƒå›´</span></h1><p><code>IE9</code> æ”¯æŒèŒƒå›´ï¼Œä½† <code>IE8</code> åŠä¹‹å‰ç‰ˆæœ¬ä¸æ”¯æŒèŒƒå›´ã€‚ä¸è¿‡ï¼Œ<code>IE8</code> åŠæ—©èµ·ç‰ˆæœ¬æ”¯æŒä¸€ç§ç±»ä¼¼çš„æ¦‚å¿µï¼Œå³ <strong>æ–‡æœ¬èŒƒå›´ï¼ˆtext rangeï¼‰</strong> ã€‚æ–‡æœ¬èŒƒå›´æ˜¯ <code>IE</code> ä¸“æœ‰ç‰¹æ€§ï¼Œä¸»è¦å¤„ç†æ–‡æœ¬ï¼ˆä¸ä¸€å®šæ˜¯ <code>DOM</code> èŠ‚ç‚¹ï¼‰ã€‚é€šè¿‡ <code>&lt;body&gt;</code>ã€<br><code>&lt;button&gt;</code>ã€<code>&lt;input&gt;</code>å’Œ<code>&lt;textarea&gt;</code>ç­‰å‡ ä¸ªå…ƒç´ ï¼Œå¯ä»¥è°ƒç”¨ <code>createTextRange()</code> æ–¹æ³•æ¥åˆ›å»ºæ–‡æœ¬èŒƒå›´ã€‚ä¾‹å¦‚ï¼š</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> range = <span class="built_in">document</span>.body.createTextRange();</span><br></pre></td></tr></table></figure>
<p>ä¸ <code>DOM</code> èŒƒå›´ç±»ä¼¼ï¼Œä½¿ç”¨ <code>IE</code> æ–‡æœ¬èŒƒå›´çš„æ–¹å¼ä¹Ÿæœ‰å¾ˆå¤šç§ã€‚</p>
<h3><span id="1-ç”¨-ie-èŒƒå›´å®ç°ç®€å•çš„é€‰æ‹©">1ã€ç”¨ IE èŒƒå›´å®ç°ç®€å•çš„é€‰æ‹©</span></h3><p>é€‰æ‹©é¡µé¢ä¸­æŸä¸€åŒºåŸŸæœ€ç®€å•çš„æ–¹å¼ï¼Œå°±æ˜¯ä½¿ç”¨èŒƒå›´çš„ <code>findText()</code> æ–¹æ³•ã€‚è¿™ä¸ªæ–¹æ³•ä¼šæ‰¾åˆ°ç¬¬ä¸€æ¬¡å‡ºç°çš„ç»™å®šæ–‡æœ¬ï¼Œå¹¶å°†èŒƒå›´ç§»è¿‡æ¥ä»¥ç¯ç»•è¯¥æ–‡æœ¬ã€‚å¦‚æœæ²¡æ‰¾åˆ°æ–‡æœ¬ï¼Œè¿™ä¸ªæ–¹æ³•è¿”å› <code>false</code> ï¼›å¦åˆ™ï¼Œè¿”å› <code>true</code> ã€‚åŒæ ·ï¼Œä»ç„¶ä»¥ä¸‹é¢çš„ <code>HTML</code> ä»£ç ä¸ºä¾‹ï¼š</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">p</span> <span class="attr">id</span>=<span class="string">"p1"</span>&gt;</span><span class="tag">&lt;<span class="name">b</span>&gt;</span>Hello<span class="tag">&lt;/<span class="name">b</span>&gt;</span> world!<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>è¦é€‰æ‹© <code>Hello</code> ï¼Œå¯ä»¥ä½¿ç”¨ä»¥ä¸‹ä»£ç ï¼š</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> range = <span class="built_in">document</span>.body.createTextRange();</span><br><span class="line"><span class="keyword">var</span> found = range.findText(<span class="string">"Hello"</span>);</span><br><span class="line">alert(found); <span class="comment">//true</span></span><br><span class="line">alert(range.text); <span class="comment">//"Hello"</span></span><br></pre></td></tr></table></figure>
<p><code>IE</code> ä¸­ä¸ <code>DOM</code> ä¸­çš„ <code>selectNode()</code> æ–¹æ³•æœ€æ¥è¿‘çš„æ–¹æ³•æ˜¯ <code>moveToElementText()</code> ï¼Œè¿™ä¸ªæ–¹æ³•æ¥å—ä¸€ä¸ª <code>DOM</code> å…ƒç´ ï¼Œå¹¶é€‰æ‹©è¯¥å…ƒç´ çš„æ‰€æœ‰æ–‡æœ¬ï¼ŒåŒ…å« <code>HTML</code> æ ‡ç­¾ï¼Œä¾‹å¦‚ï¼š</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> range = <span class="built_in">document</span>.body.createTextRange(),</span><br><span class="line">    p1 = <span class="built_in">document</span>.getElementById(<span class="string">"p1"</span>);</span><br><span class="line">range.moveToElementText(p1);</span><br></pre></td></tr></table></figure>
<p>åœ¨æ–‡æœ¬èŒƒå›´ä¸­åŒ…å« <code>HTML</code> çš„æƒ…å†µä¸‹ï¼Œå¯ä»¥ä½¿ç”¨ <code>htmlText</code> å±æ€§å–å¾—èŒƒå›´çš„å…¨éƒ¨å†…å®¹ï¼Œä¾‹å¦‚ï¼š</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">alert(range.htmlText);</span><br></pre></td></tr></table></figure>
<p><code>IE</code> çš„èŒƒå›´æ²¡æœ‰ä»»ä½•å±æ€§å¯ä»¥éšç€èŒƒå›´é€‰åŒºçš„å˜åŒ–è€ŒåŠ¨æ€æ›´æ–°ã€‚ä¸è¿‡ï¼Œå…¶ <code>parentElement()</code> æ–¹æ³•å€’æ˜¯ä¸<code>DOM</code> çš„ <code>commonAncestorContainer</code> å±æ€§ç±»ä¼¼ã€‚ä¾‹å¦‚ï¼š</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> ancestor = range.parentElement();</span><br></pre></td></tr></table></figure>
<p>è¿™æ ·å°±å¾—åˆ°äº†èŒƒå›´é€‰åŒºçš„çˆ¶èŠ‚ç‚¹ã€‚</p>
<h3><span id="2-ä½¿ç”¨-ie-èŒƒå›´å®ç°å¤æ‚çš„é€‰æ‹©">2ã€ä½¿ç”¨ IE èŒƒå›´å®ç°å¤æ‚çš„é€‰æ‹©</span></h3><p>åœ¨ <code>IE</code> ä¸­åˆ›å»ºå¤æ‚èŒƒå›´çš„æ–¹æ³•ï¼Œå°±æ˜¯ä»¥å¢é‡å‘å››å‘¨ç§»åŠ¨èŒƒå›´ã€‚ä¸ºæ­¤ï¼Œ<code>IE</code> æä¾›äº† 4 ä¸ªæ–¹æ³•ï¼š<br><code>move()</code>ã€<code>moveStart()</code>ã€<code>moveEnd()</code> å’Œ <code>expand()</code>ã€‚<br>è¿™äº›æ–¹æ³•éƒ½æ¥å—ä¸¤ä¸ªå‚æ•°ï¼šç§»åŠ¨å•ä½å’Œç§»åŠ¨å•ä½çš„æ•°é‡ã€‚å…¶ä¸­ï¼Œç§»åŠ¨å•ä½æ˜¯ä¸‹åˆ—ä¸€ç§å­—ç¬¦ä¸²å€¼ï¼š</p>
<p>1ã€<code>character</code>ï¼šè¿™ä¸ªå­—ç¬¦åœ°ç§»åŠ¨ï¼›<br>2ã€<code>word</code>ï¼šé€ä¸ªå•è¯ï¼ˆä¸€ç³»åˆ—éç©ºæ ¼å­—ç¬¦ï¼‰åœ°ç§»åŠ¨ï¼›<br>3ã€<code>sentence</code>ï¼šé€ä¸ªå¥å­ï¼ˆä¸€ç³»åˆ—ä»¥å¥å·ã€é—®å·æˆ–å¹å·ç»“å°¾çš„å­—ç¬¦ï¼‰åœ°ç§»åŠ¨ï¼›<br>4ã€<code>textedit</code>ï¼šç§»åŠ¨åˆ°å½“å‰èŒƒå›´é€‰åŒºçš„å¼€å§‹æˆ–ç»“æŸä½ç½®ã€‚</p>
<p>é€šè¿‡ <code>moveStart()</code> æ–¹æ³•å¯ä»¥ç§»åŠ¨åˆ°èŒƒå›´çš„èµ·ç‚¹ï¼Œé€šè¿‡ <code>moveEnd()</code> æ–¹æ³•å¯ä»¥ç§»åŠ¨åˆ°èŒƒå›´çš„ç»ˆç‚¹ï¼Œç§»åŠ¨çš„å¹…åº¦ç”±å•ä½æ•°é‡æŒ‡å®šï¼Œä¾‹å¦‚ï¼š</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">range.moveStart(<span class="string">"word"</span>,<span class="number">2</span>); <span class="comment">//èµ·ç‚¹ç§»åŠ¨ 2 ä¸ªå•è¯</span></span><br><span class="line">range.moveEnd(<span class="string">"character"</span>,<span class="number">1</span>); <span class="comment">//ç»ˆç‚¹ç§»åŠ¨ 1 ä¸ªå­—ç¬¦</span></span><br></pre></td></tr></table></figure>
<p>ä½¿ç”¨ <code>expand()</code> æ–¹æ³•å¯ä»¥å°†èŒƒå›´è§„èŒƒåŒ–ã€‚æ¢å¥è¯è¯´ï¼Œå¯ä»¥å°†ä»»ä½•éƒ¨åˆ†é€‰æ‹©çš„æ–‡æœ¬å…¨éƒ¨é€‰ä¸­ã€‚ä¾‹å¦‚ï¼š</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">range.expand(<span class="string">"word"</span>); <span class="comment">//å¯ä»¥å°†æ•´ä¸ªå•è¯é€‰ä¸­</span></span><br></pre></td></tr></table></figure>
<p>è€Œ <code>move()</code> æ–¹æ³•åˆ™å…ˆä¼šæŠ˜å å½“å‰èŒƒå›´ï¼Œç„¶åå†å°†èŒƒå›´ç§»åŠ¨åˆ°æŒ‡å®šçš„å•ä½æ•°é‡ï¼Œä¾‹å¦‚ï¼š</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">range.move(<span class="string">"character"</span>,<span class="number">5</span>); <span class="comment">//ç§»åŠ¨ 5 ä¸ªå­—ç¬¦</span></span><br></pre></td></tr></table></figure>
<h3><span id="3-æ“ä½œ-ie-èŒƒå›´ä¸­çš„å†…å®¹">3ã€æ“ä½œ IE èŒƒå›´ä¸­çš„å†…å®¹</span></h3><p>åœ¨ <code>IE</code> ä¸­æ“ä½œèŒƒå›´ä¸­çš„å†…å®¹å¯ä»¥ä½¿ç”¨ <code>text</code> å±æ€§æˆ– <code>pasteHTML()</code> æ–¹æ³•ã€‚å¦‚å‰æ‰€è¿°ï¼Œé€šè¿‡ <code>text</code> å±æ€§å¯ä»¥å–å¾—èŒƒå›´ä¸­çš„å†…å®¹æ–‡æœ¬ï¼›ä½†æ˜¯ï¼Œä¹Ÿå¯ä»¥é€šè¿‡è¿™ä¸ªå±æ€§è®¾ç½®èŒƒå›´ä¸­çš„å†…å®¹æ–‡æœ¬ã€‚ä¾‹å¦‚ï¼š</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> range = <span class="built_in">document</span>.body.createTextRange();</span><br><span class="line">range.findText(<span class="string">"Hello"</span>);</span><br><span class="line">range.text = <span class="string">"Hi"</span>;</span><br></pre></td></tr></table></figure>
<p>æ‰§è¡Œä»¥ä¸Šä»£ç åçš„ <code>HTML</code> ä»£ç å¦‚ä¸‹ï¼š</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">p</span> <span class="attr">id</span>=<span class="string">p1</span>&gt;</span><span class="tag">&lt;<span class="name">b</span>&gt;</span>Hi<span class="tag">&lt;/<span class="name">b</span>&gt;</span> world!<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>è¿™æ—¶ï¼Œ<code>HTML</code> æ ‡ç­¾ä¿æŒä¸å˜ï¼Œè‹¥è¦åƒèŒƒå›´ä¸­æ’å…¥ <code>HTML</code> ä»£ç ï¼Œå°±å¾—ä½¿ç”¨ <code>pasteHTMl()</code> æ–¹æ³•ï¼Œä¾‹å¦‚ï¼š</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> range = <span class="built_in">document</span>.body.createTextRange();</span><br><span class="line">range.findText(<span class="string">"Hello"</span>);</span><br><span class="line">range.pasteHTML(<span class="string">"&lt;em&gt;Hi&lt;/em&gt;"</span>);</span><br></pre></td></tr></table></figure>
<p>æ‰§è¡Œä»¥ä¸Šä»£ç åçš„ <code>HTML</code> ä»£ç å¦‚ä¸‹ï¼š</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">p</span> <span class="attr">id</span>=<span class="string">p1</span>&gt;</span><span class="tag">&lt;<span class="name">b</span>&gt;</span><span class="tag">&lt;<span class="name">em</span>&gt;</span>Hi<span class="tag">&lt;/<span class="name">em</span>&gt;</span><span class="tag">&lt;/<span class="name">b</span>&gt;</span> world!<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>æ³¨æ„ï¼šåœ¨èŒƒå›´ä¸­åŒ…å« <code>HTML</code> ä»£ç æ—¶ï¼Œä¸åº”è¯¥ä½¿ç”¨ <code>pasteHTML()</code> ï¼Œå› ä¸ºè¿™æ ·å¾ˆå®¹æ˜“å¯¼è‡´ä¸å¯é¢„æ–™çš„ç»“æœï¼ˆå¾ˆå¯èƒ½æ˜¯æ ¼å¼ä¸æ­£ç¡®çš„ <code>HTML</code>ï¼‰ã€‚</p>
<h3><span id="4-æŠ˜å -ie-èŒƒå›´">4ã€æŠ˜å  IE èŒƒå›´</span></h3><p><code>IE</code> ä¸ºèŒƒå›´æä¾›çš„ <code>collapse()</code> æ–¹æ³•ä¸ <code>DOM</code> æ–¹æ³•ç”¨æ³•ä¸€æ ·ï¼Œå¯æƒœï¼Œæ²¡æœ‰å¯¹åº”çš„ <code>collapsed</code> å±æ€§è®©æˆ‘ä»¬çŸ¥é“èŒƒå›´æ˜¯å¦å·²ç»æŠ˜å å®Œæ¯•ã€‚ä¸ºæ­¤ï¼Œå¿…é¡»ä½¿ç”¨ <code>boundingWidth</code> å±æ€§ï¼Œè¯¥å±æ€§è¿”å›èŒƒå›´çš„å®½åº¦ï¼ˆä»¥åƒç´ ä¸ºå•ä½ï¼‰ã€‚å¦‚æœç­‰äº <code>0</code> è¯´æ˜èŒƒå›´å·²ç»æŠ˜å ã€‚ä¾‹å¦‚ï¼š</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">range.collapse(<span class="literal">true</span>);</span><br><span class="line">alert(range.boundingWidth); <span class="comment">//0</span></span><br></pre></td></tr></table></figure>
<p>æ­¤å¤–ï¼Œè¿˜æœ‰ <code>boundingHeight</code>ã€<code>boundingLeft</code> å’Œ<code>boundingTop</code> ç­‰å±æ€§ï¼Œå¯ä»¥æä¾›ä¸€äº›ä½ç½®ä¿¡æ¯ã€‚</p>
<h3><span id="5-æ¯”è¾ƒ-ie-èŒƒå›´">5ã€æ¯”è¾ƒ IE èŒƒå›´</span></h3><p><code>IE</code> ä¸­çš„ <code>compareEndPoints()</code> æ–¹æ³•ä¸ <code>DOM</code> èŒƒå›´çš„ <code>compareBoundaryPoints()</code> æ–¹æ³•ç±»ä¼¼ã€‚è¿™ä¸ªæ–¹æ³•æ¥å—ä¸¤ä¸ªå‚æ•°ï¼šæ¯”è¾ƒçš„ç±»å‹å’Œè¦æ¯”è¾ƒçš„èŒƒå›´ã€‚æ¯”è¾ƒç±»å‹çš„å–å€¼èŒƒå›´æ˜¯ä¸‹åˆ—å‡ ä¸ªå­—ç¬¦ä¸²å€¼ï¼š<code>StartToStart</code>ã€<br><code>StartToEnd</code>ã€<code>EndToEnd</code>ã€<code>EndToStart</code>ã€‚ <code>compareEndPoints()</code> æ–¹æ³•è¿”å›å€¼åŒ <code>compareBoundaryPoints()</code> æ–¹æ³•ã€‚ä¾‹å¦‚ï¼š</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> range1 = <span class="built_in">document</span>.body.createTextRange(),</span><br><span class="line">    range2 = <span class="built_in">document</span>.body.createTextRange();</span><br><span class="line">range1.findText(<span class="string">"Hello world!"</span>);</span><br><span class="line">range2.findText(<span class="string">"Hello"</span>);</span><br><span class="line">alert(range1.compareEndPoints(<span class="string">"StartToStart"</span>,range2)); <span class="comment">//0</span></span><br><span class="line">alert(range1.compareEndPoints(<span class="string">"EndToEnd"</span>,range2)); <span class="comment">//1</span></span><br></pre></td></tr></table></figure>
<p><code>IE</code> ä¸­è¿˜æœ‰ä¸¤ä¸ªæ–¹æ³•ï¼Œä¹Ÿç”¨äºæ¯”è¾ƒèŒƒå›´ï¼š<code>isEqual()</code> æ–¹æ³•ç”¨äºç¡®å®šä¸¤ä¸ªèŒƒå›´æ˜¯å¦ç›¸ç­‰ï¼Œ<code>inRange()</code> æ–¹æ³•ç”¨äºç¡®å®šä¸€ä¸ªèŒƒå›´æ˜¯å¦åŒ…å«å¦ä¸€ä¸ªèŒƒå›´ã€‚ä¾‹å¦‚ï¼š</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> range1 = <span class="built_in">document</span>.body.createTextRange(),</span><br><span class="line">    range2 = <span class="built_in">document</span>.body.createTextRange();</span><br><span class="line">range1.findText(<span class="string">"Hello world!"</span>);</span><br><span class="line">range2.findText(<span class="string">"Hello"</span>);</span><br><span class="line">alert(<span class="string">"range1.isEqual(range2):"</span>+range1.isEqual(range2)); <span class="comment">//false</span></span><br><span class="line">alert(<span class="string">"range1.inRange(range2):"</span>+range1.inRange(range2)); <span class="comment">//true</span></span><br></pre></td></tr></table></figure>
<h3><span id="6-å¤åˆ¶-ie-èŒƒå›´">6ã€å¤åˆ¶ IE èŒƒå›´</span></h3><p>åœ¨ <code>IE</code> ä¸­ä½¿ç”¨ <code>duplicate()</code> æ–¹æ³•å¯ä»¥å¤åˆ¶æ–‡æœ¬èŒƒå›´ï¼Œç»“æœä¼šåˆ›å»ºåŸèŒƒå›´çš„ä¸€ä¸ªå‰¯æœ¬ï¼Œä¾‹å¦‚ï¼š</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> newRange = range.duplicate();</span><br></pre></td></tr></table></figure>
<p>æ–°åˆ›å»ºçš„èŒƒå›´ä¼šå¸¦æœ‰ä¸åŸèŒƒå›´å®Œå…¨ç›¸åŒçš„å±æ€§ã€‚<br><br></p>
<p><g-emoji alias="yum" fallback-src="https://assets-cdn.github.com/images/icons/emoji/unicode/1f60b.png" ios-version="6.0">ğŸ˜‹</g-emoji><g-emoji alias="yum" fallback-src="https://assets-cdn.github.com/images/icons/emoji/unicode/1f60b.png" ios-version="6.0">ğŸ˜‹</g-emoji><g-emoji alias="yum" fallback-src="https://assets-cdn.github.com/images/icons/emoji/unicode/1f60b.png" ios-version="6.0">ğŸ˜‹</g-emoji> å¥½äº†ï¼ŒåŸºæœ¬çŸ¥è¯†å°±æ˜¯è¿™äº›ï¼Œåœ¨è¿™é‡Œå’Œå¤§å®¶è¯´æ‹œæ‹œå•¦~</p>
<p><a href="http://yixunfe.github.io/blog/demo/37/demo.html" target="_blank" rel="noopener">æŸ¥çœ‹demo</a></p>
</div><br><h4>Thanks</h4><div class="copyright">ç‰ˆæƒå£°æ˜ï¼šç‰ˆæƒå½’ä½œè€…æ‰€æœ‰ï¼Œå¦‚éœ€è½¬è½½è¯·è”ç³»åšä¸»ã€‚</div><div class="post-footer"><div class="meta"><div class="info"><i class="fa fa-sun-o"></i><span class="date">2017-05-24</span><i class="fa fa-tag"></i><!-- - item.categories.sort('posts').each(function(item) {--><!-- 		a.tag(href=config.root + item.path, title= item.name)= item.name + " "--><!-- - });--><a href="/h-blog/tags/range/" title="range" class="tag">range </a></div></div></div></div><div class="share"><div class="evernote"><a href="javascript:(function(){EN_CLIP_HOST='http://www.evernote.com';try{var%20x=document.createElement('SCRIPT');x.type='text/javascript';x.src=EN_CLIP_HOST+'/public/bookmarkClipper.js?'+(new%20Date().getTime()/100000);document.getElementsByTagName('head')[0].appendChild(x);}catch(e){location.href=EN_CLIP_HOST+'/clip.action?url='+encodeURIComponent(location.href)+'&amp;title='+encodeURIComponent(document.title);}})();" ref="nofollow" target="_blank" class="fa fa-bookmark"></a></div><div class="weibo"><a href="javascript:void((function(s,d,e){try{}catch(e){}var f='http://service.weibo.com/share/share.php?',u=d.location.href,p=['url=',e(u),'&amp;title=',e(d.title),'&amp;appkey=2924220432'].join('');function a(){if(!window.open([f,p].join(''),'mb',['toolbar=0,status=0,resizable=1,width=620,height=450,left=',(s.width-620)/2,',top=',(s.height-450)/2].join('')))u.href=[f,p].join('');};if(/Firefox/.test(navigator.userAgent)){setTimeout(a,0)}else{a()}})(screen,document,encodeURIComponent));" class="fa fa-weibo"></a></div><div class="twitter"><a href="http://twitter.com/home?status=,https://zdddrszj.github.io/h-blog/2017/05/24/range/,Shirly,DOM ä¸­çš„èŒƒå›´,;" class="fa fa-twitter"></a></div></div><div class="pagination"><ul class="clearfix"><li class="pre pagbuttons"><a role="navigation" href="/h-blog/2017/06/18/rotating-cube/" title="3D æ—‹è½¬ç«‹æ–¹ä½“" class="btn">ä¸Šä¸€ç¯‡</a></li></ul></div><a id="comments"></a><div id="vcomments" style="margin:0 30px;"></div><script src="https://imsun.github.io/gitment/dist/gitment.browser.js"></script><script>const gitment = new Gitment({
    id: location.href,
    owner: 'zdddrszj',
    repo: 'h-blog',
    oauth: {
        client_id: 'fa0612e95df36a1b5754',
        client_secret: '27e682fd9c45ef2379461c346d3b23d5a1db057f',
    }
})
gitment.render('comments')</script></div></div></div></div><script src="/h-blog/js/jquery.js"></script><script src="/h-blog/js/jquery-migrate-1.2.1.min.js"></script><script src="/h-blog/js/jquery.appear.js"></script><script src="/h-blog/js/tagcanvas.js"></script><script>window.onload = function() {
  try {
    TagCanvas.textColour = '#FD6B1E'
    TagCanvas.outlineColour = '#999'
    TagCanvas.Start('tagsCanvas')
  } catch (e) {}
}</script></body></html>